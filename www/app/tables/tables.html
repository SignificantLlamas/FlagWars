<ion-view view-title="Tables">
  <ion-content class="padding">
    <h2>{{vm.title}}</h2>
    <p>{{vm.location.address[0]}} </br>
        {{vm.location.city}},
        {{vm.location.state_code}},
        {{vm.location.postal_code}}
    </p>
    <div class="list list-inset">
      <div class="item" ng-repeat="table in vm.tables">
        <div>{{table.dateTime | date:"medium"}}
             ({{table.users.length}} going)
            <button class="button button-small"
              ng-class="{'button-assertive': table.users.length < table.max,
                'button-dark': table.users.length >= table.max}"
              ng-click="vm.updateInfo(vm.userId, table._id)">Join</button>
        </div>

        <div class="error-container ng-hide" ng-show="table.users.length >= table.max" ng-messages="maxusers">
          <i class="ion-information-circled"></i>
          Room is full
        </div>
      </div>
    <div>
        <a class="button button-small button-assertive" ui-sref="tabs.create">Create your own table</a>
    </div>
  </ion-content>
</ion-view>
