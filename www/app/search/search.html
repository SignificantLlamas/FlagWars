<ion-view title="Family Style">
  <ion-content class="grey-background">
    <form name="form" novalidate ng-submit="form.$valid && vm.restSearch(vm.restaurant, vm.location, form)">

      <div class="list list-inset">

        <label class="item item-input">
          <input type="text"
            placeholder="Restaurant name, category"
            ng-model="vm.restaurant">
        </label>
        <label class="item item-input"
          ng-class="{ 'has-errors': form.$submitted && form.$invalid, 'no-errors': form.$submitted && form.$valid }">
          <input type="text"
            ng-model="vm.location"
            placeholder="Location"
            required>
        </label>

        <div class="error-container" ng-show="form.$submitted && form.$error" ng-messages="form.$error">
          <ng-messages-include src="config/error-list.html"></ng-messages-include>
        </div>

      </div>

      <input type="submit"
        class="button button-block button-assertive"
        value="Search" ng-disabled="vm.loadRipple">

    </form>

    <div>
      <div class="text-center">
        <h2 ng-show="!vm.restResults.length && vm.hasSearched && !vm.loadRipple">No restaurants found</h2>
        <img src="img/ripple.gif" ng-show="vm.loadRipple"/>
      </div>
      <div ng-click="vm.tablePage(rest)" class="white-background rest-item" ng-repeat="rest in vm.restResults">
        <div class="col-25">
          <img src="{{rest.image_url}}"/>
        </div>
        <div class="col-65">
          <div class="restaurant-name">
            {{rest.name}}
          </div>
          <div class="top-address">
            {{rest.location.address[0]}}
          </div>
          <div>
            {{rest.location.city}}, {{rest.location.state_code}}, {{rest.location.postal_code}}
          </div>
        </div>
      </div>
    </div>
  </ion-content>
</ion-view>
